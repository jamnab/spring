- user = post.user
- class_type = "work" if post.post_type == Post::WORK
- class_type = "play" if post.post_type == Post::PLAY
- class_type = "facility" if post.post_type == Post::FACILITY

.post-wrapper.col-xs-12.col-sm-6
  .post{class: class_type}
    .header
      = post.title
      .traction{class: ("doit" if post.doit?)}
        - if post.doit?
          = image_tag "doit.png"
        - else
          Traction:

        #{post.opinion} / #{post.threshold}
        .tags
          - opinion = Opinion.where(opinionable_type: "Post", opinionable_id: post.id, user_id: current_user.id).first
          = form_for Opinion.new, remote: true do |f|
            = f.hidden_field :positive, value: 'true'
            = f.hidden_field :user_id, value: current_user.id
            = f.hidden_field :opinionable_id, value: post.id
            = f.hidden_field :opinionable_type, value: 'Post'
            .btn.btn-sm.btn-like{class: "btn-#{class_type} #{(opinion && opinion.positive) ? 'btn-on' : 'btn-off'}"}
              %span.flaticon-go
            .btn.btn-sm.btn-dislike{class: "btn-#{class_type} #{(opinion && !opinion.positive) ? 'btn-on' : 'btn-off'}"}
              %span.flaticon-go1

    .content
      .col-xs-8
        = post.content
      .col-xs-4
        = image_tag("//placehold.it/140x110")

    .signature
      .user
        = image_tag("profile_default.png")
        .name
          = user.full_name
          %br
          (#{user.username})
      .options
        = link_to '#' do
          .btn.btn-sm{class: "btn-#{class_type}"}
            %span.flaticon-edit7
        - if post.graveyard
          = link_to '#' do
            .btn.btn-sm{class: "btn-#{class_type}"}
              %span.flaticon-unlock
        - else
          = link_to '#' do
            .btn.btn-sm{class: "btn-#{class_type}"}
              %span.flaticon-lock9
        = link_to '#' do
          .btn.btn-sm{class: "btn-#{class_type}"}
            %span.flaticon-delete48

        .divider

        = link_to '#', data: {target: "#post-discussion", toggle: "modal", type: "#{class_type}"}, class: "post-discussion-toggler" do
          .btn.btn-sm.btn-counter{class: "btn-#{class_type} #{'btn-doit' if post.alt_doit?}"}
            %span.flaticon-speech29
            .count 10
        = link_to '#' do
          .btn.btn-sm.btn-off{class: "btn-#{class_type}"}
            %span.flaticon-star6


